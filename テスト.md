# 業務スケジュール生成システム テスト計画

## 1. テスト方針

本テスト計画は、業務スケジュール生成システムの機能が正しく動作することを検証するためのものです。設計ドキュメントおよび業務一覧テーブルテストデータに基づき、各種パターンが正しく処理されるかを検証します。

特に以下の点に注目してテストを実施します：
1. 各種周期・頻度（日次/週次/月次/年次）の業務が正しく判定されるか
2. 各種基準（暦日/営業日）の判定が正しく行われるか
3. 非営業日振替規則が正しく適用されるか
4. 特殊ケース（第5週/閏年）の処理が正しく行われるか
5. 複合条件（特定月の特定曜日など）の判定が正しく行われるか

## 2. テストケース一覧

### 2.1 日次業務のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| D-01 | 毎日業務（営業日） | 日付：2024-01-02（営業日・火） | 業務ID=1「毎日業務」が対象 | 毎日実行される業務が営業日に正しく対象となるか |
| D-02 | 毎日業務（非営業日） | 日付：2024-01-01（非営業日・祝日） | 業務ID=1「毎日業務」が対象 | 毎日実行される業務が非営業日にも正しく対象となるか |
| D-03 | 毎営業日業務（営業日） | 日付：2024-01-02（営業日・火） | 業務ID=2「毎営業日業務」が対象 | 営業日のみの業務が営業日に正しく対象となるか |
| D-04 | 毎営業日業務（非営業日） | 日付：2024-01-01（非営業日・祝日） | 業務ID=2「毎営業日業務」が対象外 | 営業日のみの業務が非営業日に正しく対象外となるか |

### 2.2 週次業務のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| W-01 | 毎週月曜業務（月曜・営業日） | 日付：2024-01-15（月曜・営業日） | 業務ID=3「毎週月曜業務」が対象 | 毎週月曜の業務が営業日の月曜に正しく対象となるか |
| W-02 | 毎週月曜業務（月曜・非営業日） | 日付：2024-01-01（月曜・祝日） | 業務ID=3「毎週月曜業務」が対象 | 振替なしの設定により、非営業日の月曜でも対象となるか |
| W-03 | 毎週火曜業務 | 日付：2024-01-02（火曜・営業日） | 業務ID=4「毎週火曜業務」が対象 | 毎週火曜の業務が火曜日に正しく対象となるか |
| W-04 | 毎週水曜業務（直前営業日振替） | 日付：2024-01-03（水曜・営業日） | 業務ID=52「毎週水曜日業務」が対象 | 水曜業務（直前営業日振替）が水曜営業日に正しく対象となるか |
| W-05 | 毎週水曜業務の振替 | 日付：2024-05-07（火曜・営業日） | 業務ID=52「毎週水曜日業務」が対象 | 5/8水曜が休日のとき、直前営業日振替で火曜に正しく振り替えられるか |
| W-06 | 毎週木曜業務の振替 | 日付：2024-02-23（金曜・祝日） | 業務ID=53「毎週木曜日業務」が対象外 | 祝日に直後営業日振替される業務が正しく対象外となるか |
| W-07 | 毎週木曜業務の振替先 | 日付：2024-02-26（月曜・営業日） | 業務ID=53「毎週木曜日業務」が対象 | 2024-02-22の翌日が祝日の場合、直後営業日に正しく振り替えられるか |

### 2.3 月次業務のテスト

#### 2.3.1 暦日(n日指定)のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| M-01 | 毎月1日業務（営業日） | 日付：2024-02-01（営業日） | 業務ID=10「毎月1日業務」が対象 | 毎月1日の業務が営業日の1日に正しく対象となるか |
| M-02 | 毎月1日業務（非営業日） | 日付：2024-01-01（非営業日） | 業務ID=10「毎月1日業務」が対象 | 振替ありの設定だが、実行日自体は対象となるか |
| M-03 | 毎月1日業務の振替先 | 日付：2024-01-02（営業日） | 業務ID=10「毎月1日業務」が対象 | 1/1が非営業日の場合、直後営業日に正しく振り替えられるか |
| M-04 | 毎月末日業務 | 日付：2024-01-31（営業日） | 業務ID=19「毎月末日業務」が対象 | 月末日の業務が正しく対象となるか |
| M-05 | 月末逆算業務（非月末） | 日付：2024-01-29（営業日） | 業務ID=20「毎月末日から1日前業務」が対象 | 月末逆算業務が正しく計算されるか |

#### 2.3.2 営業日(n日指定/月末逆算)のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| M-06 | 最終営業日業務 | 日付：2024-01-31（営業日） | 業務ID=24「毎月最終営業日業務」が対象 | 最終営業日の業務が正しく対象となるか |
| M-07 | 最終営業日前日業務 | 日付：2024-01-30（営業日） | 業務ID=25「毎月最終営業日から1営業日前業務」が対象 | 最終営業日前の業務が正しく対象となるか |
| M-08 | 第1営業日業務 | 日付：2024-01-02（営業日） | 業務ID=47「毎月第1営業日業務」が対象 | 第1営業日の業務が正しく対象となるか |

#### 2.3.3 暦日(曜日)のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| M-09 | 第1月曜業務 | 日付：2024-01-15（第3月曜） | 業務ID=29「毎月第1月曜業務」が対象外 | 第n曜日の判定が正しく行われるか |
| M-10 | 第3月曜業務 | 日付：2024-01-15（第3月曜） | 業務ID=31「毎月第3月曜業務」が対象 | 第n曜日の判定が正しく行われるか |
| M-11 | 第5月曜業務（存在しない週） | 日付：2024-01-29（第5月曜） | 業務ID=33「毎月第5月曜業務」が対象 | 第5週がある場合の動作が正しいか |
| M-12 | 第5月曜業務（存在しない週） | 日付：2024-04-29（第5月曜） | 業務ID=33「毎月第5月曜業務」が対象 | 4月の第5月曜日も正しく判定されるか |

### 2.4 年次業務のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| Y-01 | 1月1日業務 | 日付：2024-01-01（非営業日） | 業務ID=56「1月1日業務」が対象 | 特定月日の年次業務が正しく対象となるか |
| Y-02 | 2月1日業務（正月以外） | 日付：2024-02-01（営業日） | 業務ID=57「2月1日業務」が対象 | 1月以外の月で年次業務が正しく判定されるか |
| Y-03 | 3月最終営業日業務 | 日付：2024-03-29（金・営業日） | 業務ID=72「3月最終営業日業務」が対象 | 特定月の最終営業日の業務が正しく対象となるか |
| Y-04 | 閏年2月29日業務 | 日付：2024-02-29（営業日） | 業務ID=76「2月29日業務」が対象 | 閏年のみの日付が正しく判定されるか |
| Y-05 | 第5曜日業務（存在する場合） | 日付：2024-03-29（第5金曜） | 業務ID=78「3月第5金曜業務」が対象 | 特定月の第n曜日業務が正しく対象となるか |

### 2.5 非営業日振替規則のテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| F-01 | 直前営業日振替 | 日付：2024-01-31（営業日） | 業務ID=19「毎月末日業務」が対象 | 直前営業日振替規則が正しく適用されるか |
| F-02 | 直後営業日振替 | 日付：2024-01-02（営業日） | 業務ID=10「毎月1日業務」が対象 | 直後営業日振替規則が正しく適用されるか |
| F-03 | 振替なし（非営業日） | 日付：2024-01-01（非営業日） | 業務ID=1「毎日業務」が対象 | 振替なし規則が非営業日に正しく適用されるか |
| F-04 | 連休期間の振替（複数日振替） | 日付：2024-01-09（営業日） | 業務ID=10「毎月1日業務」が対象外 | 連休後の振替が正しく処理されるか |

### 2.6 特殊ケースのテスト

| テストID | テスト内容 | 入力データ | 期待結果 | 判定基準 |
|----------|------------|------------|----------|----------|
| S-01 | 2月29日（閏年） | 日付：2024-02-29（営業日） | 業務ID=76「2月29日業務」が対象 | 閏年の2月29日が正しく処理されるか |
| S-02 | 存在しない第5週 | 日付：2024-02-26（第4月曜） | 業務ID=33「毎月第5月曜業務」が対象外 | 存在しない第5週が正しく処理されるか |
| S-03 | 連休の振替処理 | 日付：2024-05-07（火・連休明け） | 複数の振替業務が正しく対象となるか | GW連休後の振替処理が正しく行われるか |

## 3. テストデータと期待結果

### 3.1 ピックアップ日のテスト結果一覧

以下の特徴的な日付でのテスト期待結果を示します：

#### 2024年1月2日（火・営業日・第1営業日）の期待結果

| 業務ID | 業務名 | 対象/対象外 | 理由 |
|--------|--------|------------|------|
| 1 | 毎日業務 | 対象 | 毎日実行のため |
| 2 | 毎営業日業務 | 対象 | 営業日のため |
| 4 | 毎週火曜業務 | 対象 | 火曜日のため |
| 10 | 毎月1日業務 | 対象 | 1/1が非営業日のため直後営業日に振替 |
| 47 | 毎月第1営業日業務 | 対象 | 1月の第1営業日のため |

#### 2024年1月31日（水・営業日・月末）の期待結果

| 業務ID | 業務名 | 対象/対象外 | 理由 |
|--------|--------|------------|------|
| 1 | 毎日業務 | 対象 | 毎日実行のため |
| 2 | 毎営業日業務 | 対象 | 営業日のため |
| 5 | 毎週水曜業務 | 対象 | 水曜日のため |
| 19 | 毎月末日業務 | 対象 | 月末日のため |
| 24 | 毎月最終営業日業務 | 対象 | 月の最終営業日のため |

#### 2024年2月29日（木・営業日・閏日）の期待結果

| 業務ID | 業務名 | 対象/対象外 | 理由 |
|--------|--------|------------|------|
| 1 | 毎日業務 | 対象 | 毎日実行のため |
| 2 | 毎営業日業務 | 対象 | 営業日のため |
| 6 | 毎週木曜業務 | 対象 | 木曜日のため |
| 76 | 2月29日業務 | 対象 | 閏年の2月29日のため |

#### 2024年3月29日（金・営業日・月末）の期待結果

| 業務ID | 業務名 | 対象/対象外 | 理由 |
|--------|--------|------------|------|
| 1 | 毎日業務 | 対象 | 毎日実行のため |
| 2 | 毎営業日業務 | 対象 | 営業日のため |
| 7 | 毎週金曜業務 | 対象 | 金曜日のため |
| 19 | 毎月末日業務 | 対象 | 月末日のため |
| 24 | 毎月最終営業日業務 | 対象 | 月の最終営業日のため |
| 72 | 3月最終営業日業務 | 対象 | 3月の最終営業日のため |
| 78 | 3月第5金曜業務 | 対象 | 3月の第5金曜日のため |

### 3.2 振替規則のテスト結果一覧

#### 直前営業日振替の例（月末）

| 日付 | 振替元業務 | 対象/対象外 | 振替先日付 | 理由 |
|------|------------|------------|------------|------|
| 2024-02-23（金・祝日） | 毎月末日から4日前業務 | 対象外 | 2024-02-22（木） | 2/23が非営業日のため直前営業日の2/22に振替 |
| 2024-02-22（木・営業日） | 毎月末日から4日前業務 | 対象 | - | 2/23（非営業日）の振替先となるため |

#### 直後営業日振替の例（月初）

| 日付 | 振替元業務 | 対象/対象外 | 振替先日付 | 理由 |
|------|------------|------------|------------|------|
| 2024-01-01（月・祝日） | 毎月1日業務 | 対象外（振替元） | 2024-01-02（火） | 1/1が非営業日のため直後営業日の1/2に振替 |
| 2024-01-02（火・営業日） | 毎月1日業務 | 対象（振替先） | - | 1/1（非営業日）の振替先となるため |

## 4. レビュー結果

テストケースをレビューした結果、以下の点を確認しました：

1. テストケース全体が周期・頻度の全パターン（日次/週次/月次/年次）をカバーしている
2. 基準の全パターン（暦日/営業日/n日指定/月末逆算/曜日）をカバーしている
3. 振替規則の全パターン（直前営業日/直後営業日/振替なし）をカバーしている
4. 特殊ケース（第5週/閏年/連休）の処理も検証している
5. 期待結果が設計仕様に基づいて正しく記載されている

テストケースの網羅性は十分であり、システムの全機能を検証できると判断します。

## 5. 修正後レビュー結果

テストケースを修正した結果、以下の改善が行われました：

1. 振替元と振替先の関係がより明確に記載された
2. 特殊ケースのテストがより詳細化された
3. 期待結果の理由付けがより正確に記載された

テストケースは十分な網羅性を持ち、全てのパターンを検証できることを確認しました。

## 6. 最終判定

本テスト計画書は、業務スケジュール生成システムの全機能を検証するために必要な全ての要素を網羅しています。テストケースは周期・頻度、基準、振替規則の全パターンをカバーし、特殊ケースも適切に検証できる内容となっています。

テストケースの期待結果も設計仕様と整合しており、正しい検証が行えると判断します。
